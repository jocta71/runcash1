{
  "version": 2,
  "buildCommand": "cd frontend && npm install && npm run build",
  "outputDirectory": "frontend/dist",
  "functions": {
    "api/asaas.js": {
      "memory": 1024,
      "maxDuration": 10
    },
    "api/webhook.js": {
      "memory": 1024,
      "maxDuration": 10
    },
    "api/user.js": {
      "memory": 1024,
      "maxDuration": 10
    },
    "api/strategy.js": {
      "memory": 1024,
      "maxDuration": 10
    },
    "api/roulette.js": {
      "memory": 1024,
      "maxDuration": 10
    },
    "api/ai/query.js": {
      "memory": 1024,
      "maxDuration": 30
    }
  },
  "rewrites": [
    {
      "source": "/api/health",
      "destination": "/api/index.js"
    },
    {
      "source": "/api/asaas-webhook",
      "destination": "/api/webhook.js?operation=asaas"
    },
    {
      "source": "/api/subscription-reconciliation",
      "destination": "/api/webhook.js?operation=reconciliation"
    },
    {
      "source": "/api/retry-failed-webhooks",
      "destination": "/api/webhook.js?operation=retry"
    },
    {
      "source": "/api/asaas-create-customer",
      "destination": "/api/asaas.js?operation=create-customer"
    },
    {
      "source": "/api/asaas-create-subscription",
      "destination": "/api/asaas.js?operation=create-subscription"
    },
    {
      "source": "/api/asaas-find-payment",
      "destination": "/api/asaas.js?operation=find-payment"
    },
    {
      "source": "/api/asaas-pix-qrcode",
      "destination": "/api/asaas.js?operation=pix-qrcode"
    },
    {
      "source": "/api/asaas-find-subscription",
      "destination": "/api/asaas.js?operation=find-subscription"
    },
    {
      "source": "/api/asaas-cancel-subscription",
      "destination": "/api/asaas.js?operation=cancel-subscription"
    },
    {
      "source": "/api/asaas-find-customer",
      "destination": "/api/asaas.js?operation=find-customer"
    },
    {
      "source": "/api/update-user",
      "destination": "/api/user.js?operation=update"
    },
    {
      "source": "/api/subscription-status",
      "destination": "/api/user.js?operation=subscription-status"
    },
    {
      "source": "/api/strategies",
      "destination": "/api/strategy.js"
    },
    {
      "source": "/api/api/metadados/roletas",
      "destination": "/api/roulette.js?operation=metadados"
    },
    {
      "source": "/api/metadados/roletas",
      "destination": "/api/roulette.js?operation=metadados"
    },
    {
      "source": "/api/asaas/(.*)",
      "destination": "/api/asaas.js?operation=$1"
    },
    {
      "source": "/api/webhook/(.*)",
      "destination": "/api/webhook.js?operation=$1"
    },
    {
      "source": "/api/user/(.*)",
      "destination": "/api/user.js?operation=$1"
    },
    {
      "source": "/api/strategy",
      "destination": "/api/strategy.js"
    },
    {
      "source": "/api/roulette/(.*)",
      "destination": "/api/roulette.js?operation=$1"
    },
    {
      "source": "/api/ai/query",
      "destination": "/api/ai/query.js"
    },
    {
      "source": "/api/((?!asaas|webhook|user|strategy|roulette|ai/query|health|asaas-webhook|subscription-reconciliation|retry-failed-webhooks|asaas-create-customer|asaas-create-subscription|asaas-find-payment|asaas-pix-qrcode|asaas-find-subscription|asaas-cancel-subscription|asaas-find-customer|update-user|subscription-status|strategies|api/metadados/roletas|metadados/roletas).*)",
      "destination": "https://backendapi-production-36b5.up.railway.app/api/$1"
    },
    {
      "source": "/((?!api|_next/static|_next/image|favicon.ico|favicon.svg|logo.png|img/).*)",
      "destination": "/index.html"
    }
  ]
}
